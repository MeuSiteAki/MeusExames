<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel de Sa√∫de</title>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root {
      --bg1: #f9fafb;
      --bg2: #eef2f7;
      --card: #ffffff;
      --text: #1f2937;
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --accent: #111827;
      --muted: #6b7280;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      --radius: 16px;

      --blue: #2563eb;
      --orange: #f97316;
      --red: #dc2626;
      --blue-bg: #dbeafe;
      --orange-bg: #ffedd5;
      --red-bg: #fee2e2;
    }

    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height: 100vh;
      color: var(--text);
    }

    /* Bot√£o flutuante */
    .menu-btn {
      position: fixed;
      right: 20px;
      top: 88%;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: none;
      background: var(--primary);
      color: #fff;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      z-index: 1001;
      transition: transform .25s ease, background .25s ease;
    }

    .menu-btn:hover {
      background: var(--primary-hover);
      transform: rotate(90deg) scale(1.05);
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      left: -305px;
      top: 0;
      width: 280px;
      height: 100vh;
      background: var(--accent);
      color: #fff;
      padding: 80px 20px 20px;
      transition: left .3s ease;
      z-index: 1000;
      box-shadow: 12px 0 24px rgba(0, 0, 0, 0.25);
    }

    .sidebar.active {
      left: 0;
    }

    .sidebar h3 {
      margin: 0 0 20px;
      font-weight: 700;
      font-size: 18px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 10px;
      color: #e5e7eb;
      text-decoration: none;
      margin-bottom: 8px;
      transition: background .25s ease, transform .25s ease;
    }

    .nav-link:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(6px);
    }

    .nav-link.active {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
    }

    /* √Årea principal */
    .container {
      max-width: 2000px;
      margin: 30px;
      padding: 2px;
    }

    /* Header com dois cards */
    .header {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .title-card {
      flex: 1;
      background: linear-gradient(135deg, #2563eb, #9333ea);
      color: #fff;
      padding: 20px 28px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn .6s ease;
    }

    .title-card h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 1px;
    }

    .patient-card {
      min-width: 280px;
      background: #fff;
      border-radius: 16px;
      padding: 18px 24px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
      border: 1px solid #e5e7eb;
      animation: fadeIn .6s ease;
    }

    .patient-card h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 700;
      color: #111827;
    }

    .patient-card p {
      margin: 6px 0 0;
      font-size: 14px;
      color: #6b7280;
    }

    /* Cards gerais */
    .card {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      transition: transform .25s ease, box-shadow .25s ease;
      animation: fadeIn .4s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 18px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 10px 16px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      background: #fff;
      cursor: pointer;
      transition: all .25s ease;
      font-weight: 500;
    }

    .tab-btn:hover {
      background: #f3f4f6;
      transform: translateY(-2px);
    }

    .tab-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    .tab {
      display: none;
    }

    .tab.active {
      display: block;
      animation: fadeIn .4s ease;
    }

    /* Formul√°rios */
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (max-width:700px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    label {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
      display: block;
    }

    input,
    select {
      width: 90%;
      padding: 12px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      transition: border .25s ease, box-shadow .25s ease;
      background: #fff;
      color: #111827;
      text-align: center;
    }

    input::placeholder {
      color: #9ca3af;
    }

    input:focus,
    select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }

    /* Bot√µes */
    .actions {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 18px;
      border: none;
      border-radius: 12px;
      background: var(--primary);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: background .25s ease, transform .25s ease, box-shadow .25s ease;
    }

    .btn:hover {
      background: var(--primary-hover);
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 16px rgba(37, 99, 235, 0.3);
    }

    .btn.secondary {
      background: #f3f4f6;
      color: #111827;
    }

    .btn.secondary:hover {
      background: #e5e7eb;
      transform: translateY(-2px);
    }

    /* Hist√≥rico */
    .history-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 8px;
    }

    .history-item {
      background: #fff;
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
      transition: transform .25s ease, box-shadow .25s ease;
      border: 1px solid #e5e7eb;
    }

    .history-item:hover {
      transform: scale(1.01);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }

    .history-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #374151;
      font-size: 13px;
      margin-bottom: 6px;
    }

    .history-values {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      font-size: 14px;
    }

    @media (max-width:600px) {
      .history-values {
        grid-template-columns: 1fr;
      }
    }

    /* Badges */
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      margin-left: 6px;
    }

    .badge-blue {
      color: var(--blue);
      background: var(--blue-bg);
    }

    .badge-orange {
      color: var(--orange);
      background: var(--orange-bg);
    }

    .badge-red {
      color: var(--red);
      background: var(--red-bg);
    }

    /* Campo de busca */
    .input-inline {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      background: #fff;
      transition: box-shadow .25s ease;
    }

    .input-inline:focus {
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
    }
  </style>
</head>

<body>

  <!-- Bot√£o flutuante -->
  <button class="menu-btn" id="menuBtn" aria-label="Abrir menu">‚ò∞</button>

  <!-- Menu lateral -->
  <aside class="sidebar" id="sidebar" aria-label="Menu">
    <h3>Painel</h3>
    <a href="#" class="nav-link" data-tab="tab-dados">üßç Meus dados</a>
    <a href="#" class="nav-link" data-tab="tab-exames">üß™ Exames</a>
    <a href="#" class="nav-link" data-tab="tab-historico">üóÇÔ∏è Hist√≥rico</a>
  </aside>

  <!-- Conte√∫do principal -->
  <main class="container">
    <div class="header">
      <div class="title-card">
        <h1>Meus Exames</h1>
      </div>
      <div class="patient-card" id="patientCard">
        <h2 id="patientName">Paciente</h2>
        <p id="patientAge">Idade: --</p>
      </div>
    </div>

    <section class="card">
      <!-- <div class="tabs" id="tabs">
        <button class="tab-btn active" data-tab="tab-dados">Meus dados</button>
        <button class="tab-btn" data-tab="tab-exames">Exames</button>
        <button class="tab-btn" data-tab="tab-historico">Hist√≥rico</button>
      </div> -->

      <!-- Aba: Meus dados -->
      <div id="tab-dados" class="tab active">
        <form id="formDados">
          <div class="grid">
            <div>
              <label for="nome">Nome completo</label>
              <input id="nome" type="text" placeholder="Seu nome" required />
            </div>
            <div>
              <label for="nascimento">Data de nascimento</label>
              <input id="nascimento" type="date" required />
            </div>
            <div>
              <label for="endereco">Endere√ßo</label>
              <input id="endereco" type="text" placeholder="Rua, n√∫mero, bairro" required />
            </div>
            <div>
              <label for="telefone">Telefone</label>
              <input id="telefone" type="tel" placeholder="(xx) xxxxx-xxxx" required />
            </div>
            <div>
              <label for="sangue">Tipo sangu√≠neo</label>
              <select id="sangue" required>
                <option value="">Selecione</option>
                <option>A+</option>
                <option>A-</option>
                <option>B+</option>
                <option>B-</option>
                <option>AB+</option>
                <option>AB-</option>
                <option>O+</option>
                <option>O-</option>
              </select>
            </div>
          </div>
          <div class="actions">
            <button class="btn" type="submit">Salvar dados</button>
            <button class="btn secondary" type="button" id="limparDados">Limpar</button>
          </div>
        </form>
      </div>

      <!-- Aba: Exames -->
      <div id="tab-exames" class="tab">
        <form id="formExames">
          <div class="grid">
            <div>
              <label for="glicemia">Glicemia (mg/dL)</label>
              <input id="glicemia" type="number" min="0" step="1" placeholder="Ex: 95" required />
            </div>
            <div>
              <label for="colesterol">Colesterol total (mg/dL)</label>
              <input id="colesterol" type="number" min="0" step="1" placeholder="Ex: 180" required />
            </div>
            <div>
              <label for="pressao">Press√£o arterial</label>
              <input id="pressao" type="text" placeholder="Ex: 120/80" required />
            </div>
            <div>
              <label for="bpm">BPM (batimentos por minuto)</label>
              <input id="bpm" type="number" min="0" step="1" placeholder="Ex: 72" required />
            </div>
          </div>
          <div class="actions">
            <button class="btn" type="submit">Salvar exame</button>
            <button class="btn secondary" type="button" id="limparExame">Limpar campos</button>
          </div>
        </form>
      </div>

      <!-- Aba: Hist√≥rico -->
      <div id="tab-historico" class="tab">
        <div class="actions" style="margin-bottom:8px;">
          <input type="text" id="buscaHistorico" class="input-inline"
            placeholder="Filtrar por data ou valor (ex: 120, 2025-10-03, 120/80)" />
          <button class="btn secondary" type="button" id="ordenarRecente">Mais recentes</button>
          <button class="btn secondary" type="button" id="ordenarAntigo">Mais antigos</button>
          <!-- <button class="btn secondary" type="button" id="exportarHistorico">Exportar JSON</button> -->
          <button class="btn secondary" type="button" id="apagarHistorico">Apagar hist√≥rico</button>
        </div>
        <div id="listaHistorico" class="history-list"></div>
      </div>
    </section>
  </main>

  <script>
    // Chaves do LocalStorage
    const KEY_DADOS = "dadosPessoais";
    const KEY_HIST = "historicoExames";

    // Estado de ordena√ß√£o
    let ordem = "desc"; // "desc" = mais recentes primeiro, "asc" = mais antigos

    // Abrir/fechar sidebar
    const menuBtn = document.getElementById("menuBtn");
    const sidebar = document.getElementById("sidebar");
    menuBtn.addEventListener("click", () => sidebar.classList.toggle("active"));

    // Navega√ß√£o por sidebar
    document.querySelectorAll(".nav-link").forEach(link => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const tabId = link.getAttribute("data-tab");
        setActiveTab(tabId);
        sidebar.classList.remove("active");
      });
    });

    // Tabs superiores
    document.querySelectorAll(".tab-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        setActiveTab(btn.getAttribute("data-tab"));
      });
    });

    function setActiveTab(id) {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      document.querySelectorAll(".nav-link").forEach(l => l.classList.remove("active"));
      const tab = document.getElementById(id);
      const topBtn = document.querySelector(`.tab-btn[data-tab="${id}"]`);
      const sideLink = document.querySelector(`.nav-link[data-tab="${id}"]`);
      if (tab) tab.classList.add("active");
      if (topBtn) topBtn.classList.add("active");
      if (sideLink) sideLink.classList.add("active");
    }

    // Valida√ß√£o simples de press√£o arterial (ex: 120/80)
    function validarPressao(str) {
      return /^\s*\d{2,3}\s*\/\s*\d{2,3}\s*$/.test(str);
    }

    // Avalia√ß√µes de exames
    function avaliarGlicemia(v) {
      if (v < 60) return { cls: "badge-orange", msg: "Baixo" };
      if (v <= 120) return { cls: "badge-blue", msg: "Normal" };
      return { cls: "badge-red", msg: "Alto" };
    }
    function avaliarColesterol(v) {
      if (v < 200) return { cls: "badge-blue", msg: "Desej√°vel" };
      if (v < 240) return { cls: "badge-orange", msg: "Lim√≠trofe" };
      return { cls: "badge-red", msg: "Alto" };
    }
    function avaliarBPM(v) {
      if (v < 60) return { cls: "badge-orange", msg: "Baixo" };
      if (v <= 100) return { cls: "badge-blue", msg: "Normal" };
      return { cls: "badge-red", msg: "Alto" };
    }
    function avaliarPressao(val) {
      const [s, d] = val.split("/").map(v => parseInt(v, 10));
      if (isNaN(s) || isNaN(d)) return { cls: "", msg: "N/A" };
      if (s < 90 || d < 60) return { cls: "badge-orange", msg: "Baixa" };
      if (s <= 139 && d <= 89) return { cls: "badge-blue", msg: "Normal" };
      return { cls: "badge-red", msg: "Alta" };
    }

    // Fun√ß√µes de idade
    function calcularIdade(dataNasc) {
      if (!dataNasc) return "";
      const hoje = new Date();
      const nasc = new Date(dataNasc);
      let idade = hoje.getFullYear() - nasc.getFullYear();
      const m = hoje.getMonth() - nasc.getMonth();
      if (m < 0 || (m === 0 && hoje.getDate() < nasc.getDate())) {
        idade--;
      }
      return idade;
    }

    function atualizarPatientCard() {
      const dados = JSON.parse(localStorage.getItem(KEY_DADOS) || "null");
      const nameEl = document.getElementById("patientName");
      const ageEl = document.getElementById("patientAge");
      if (dados) {
        nameEl.textContent = dados.nome || "Paciente";
        const idade = calcularIdade(dados.nascimento);
        ageEl.textContent = idade ? `Idade: ${idade} anos` : "Idade: --";
      } else {
        nameEl.textContent = "Paciente";
        ageEl.textContent = "Idade: --";
      }
    }

    // Form dados pessoais
    const formDados = document.getElementById("formDados");
    const limparDadosBtn = document.getElementById("limparDados");

    formDados.addEventListener("submit", (e) => {
      e.preventDefault();
      const dados = {
        nome: document.getElementById("nome").value.trim(),
        nascimento: document.getElementById("nascimento").value,
        endereco: document.getElementById("endereco").value.trim(),
        telefone: document.getElementById("telefone").value.trim(),
        sangue: document.getElementById("sangue").value
      };
      localStorage.setItem(KEY_DADOS, JSON.stringify(dados));
      atualizarPatientCard();
      Swal.fire({
        icon: 'success',
        title: 'Sucesso!',
        text: 'Dados salvos com sucesso.',
        timer: 1800,
        showConfirmButton: false
      });
    });

    limparDadosBtn.addEventListener("click", () => {
      formDados.reset();
      atualizarPatientCard(); // reflete reset se n√£o houver dados salvos
    });

    function carregarDados() {
      const dadosSalvos = JSON.parse(localStorage.getItem(KEY_DADOS) || "null");
      if (!dadosSalvos) { atualizarPatientCard(); return; }
      document.getElementById("nome").value = dadosSalvos.nome || "";
      document.getElementById("nascimento").value = dadosSalvos.nascimento || "";
      document.getElementById("endereco").value = dadosSalvos.endereco || "";
      document.getElementById("telefone").value = dadosSalvos.telefone || "";
      document.getElementById("sangue").value = dadosSalvos.sangue || "";
      atualizarPatientCard();
    }

    // Form exames
    const formExames = document.getElementById("formExames");
    const limparExameBtn = document.getElementById("limparExame");

    formExames.addEventListener("submit", (e) => {
      e.preventDefault();
      const glicemia = parseInt(document.getElementById("glicemia").value, 10);
      const colesterol = parseInt(document.getElementById("colesterol").value, 10);
      const pressao = document.getElementById("pressao").value.trim();
      const bpm = parseInt(document.getElementById("bpm").value, 10);

      if (!validarPressao(pressao)) {
        Swal.fire({
          icon: 'error',
          title: 'Formato inv√°lido',
          text: 'Use algo como 120/80.',
        });
        return;
      }

      const exame = {
        id: Date.now(), // id √∫nico para remo√ß√£o segura
        glicemia, colesterol, pressao, bpm,
        dataISO: new Date().toISOString()
      };

      const historico = JSON.parse(localStorage.getItem(KEY_HIST) || "[]");
      historico.push(exame);
      localStorage.setItem(KEY_HIST, JSON.stringify(historico));
      carregarHistorico();
      formExames.reset();
      setActiveTab("tab-historico");
      Swal.fire({
        icon: 'success',
        title: 'Exame salvo!',
        timer: 1500,
        showConfirmButton: false
      });
    });

    limparExameBtn.addEventListener("click", () => formExames.reset());

    // Ordena√ß√£o controles
    document.getElementById("ordenarRecente").addEventListener("click", () => {
      ordem = "desc";
      carregarHistorico();
    });
    document.getElementById("ordenarAntigo").addEventListener("click", () => {
      ordem = "asc";
      carregarHistorico();
    });

    // Busca no hist√≥rico
    const buscaInput = document.getElementById("buscaHistorico");
    buscaInput.addEventListener("input", carregarHistorico);

    // Carregar hist√≥rico com ordena√ß√£o e filtro
    function carregarHistorico() {
      const lista = document.getElementById("listaHistorico");
      lista.innerHTML = "";
      let historico = JSON.parse(localStorage.getItem(KEY_HIST) || "[]");

      // Ordenar
      historico.sort((a, b) => ordem === "desc"
        ? new Date(b.dataISO) - new Date(a.dataISO)
        : new Date(a.dataISO) - new Date(b.dataISO)
      );

      // Filtro
      const termo = (buscaInput.value || "").toLowerCase().trim();
      if (termo) {
        historico = historico.filter(exame => {
          const dataFmt = new Date(exame.dataISO).toLocaleString("pt-BR", { dateStyle: "short", timeStyle: "short" }).toLowerCase();
          return (
            dataFmt.includes(termo) ||
            String(exame.glicemia).toLowerCase().includes(termo) ||
            String(exame.colesterol).toLowerCase().includes(termo) ||
            String(exame.pressao).toLowerCase().includes(termo) ||
            String(exame.bpm).toLowerCase().includes(termo)
          );
        });
      }

      // Render
      historico.forEach(exame => {
        const dataFmt = new Date(exame.dataISO).toLocaleString("pt-BR", { dateStyle: "short", timeStyle: "short" });

        const g = avaliarGlicemia(exame.glicemia);
        const c = avaliarColesterol(exame.colesterol);
        const p = avaliarPressao(exame.pressao);
        const b = avaliarBPM(exame.bpm);

        const item = document.createElement("div");
        item.className = "history-item";

        const head = document.createElement("div");
        head.className = "history-head";
        head.innerHTML = `<span>Data: ${dataFmt}</span>`;

        const values = document.createElement("div");
        values.className = "history-values";
        values.innerHTML = `
          <div><strong>Glicemia:</strong> ${exame.glicemia} mg/dL
            <span class="badge ${g.cls}">${g.msg}</span>
          </div>
          <div><strong>Colesterol:</strong> ${exame.colesterol} mg/dL
            <span class="badge ${c.cls}">${c.msg}</span>
          </div>
          <div><strong>Press√£o:</strong> ${exame.pressao}
            <span class="badge ${p.cls}">${p.msg}</span>
          </div>
          <div><strong>BPM:</strong> ${exame.bpm}
            <span class="badge ${b.cls}">${b.msg}</span>
          </div>
        `;

        const actions = document.createElement("div");
        actions.className = "actions";
        const removerBtn = document.createElement("button");
        removerBtn.className = "btn secondary";
        removerBtn.textContent = "Remover";
        removerBtn.addEventListener("click", () => {
          Swal.fire({
            title: 'Remover este exame?',
            text: "Essa a√ß√£o n√£o pode ser desfeita.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#2563eb',
            cancelButtonColor: '#9ca3af',
            confirmButtonText: 'Sim, remover',
            cancelButtonText: 'Cancelar'
          }).then((result) => {
            if (result.isConfirmed) {
              removerEntrada(exame.id);
              Swal.fire('Removido!', 'O exame foi exclu√≠do.', 'success');
            }
          });
        });

        actions.appendChild(removerBtn);

        item.appendChild(head);
        item.appendChild(values);
        item.appendChild(actions);
        lista.appendChild(item);
      });

      if (historico.length === 0) {
        const vazio = document.createElement("div");
        vazio.className = "history-item";
        vazio.textContent = "Nenhum exame encontrado.";
        lista.appendChild(vazio);
      }
    }

    function removerEntrada(id) {
      const historico = JSON.parse(localStorage.getItem(KEY_HIST) || "[]");
      const novo = historico.filter(h => h.id !== id);
      localStorage.setItem(KEY_HIST, JSON.stringify(novo));
      carregarHistorico();
    }

    // Exportar e apagar hist√≥rico
    document.getElementById("exportarHistorico").addEventListener("click", () => {
      const historico = localStorage.getItem(KEY_HIST) || "[]";
      const blob = new Blob([historico], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "historico-exames.json";
      a.click();
      URL.revokeObjectURL(url);
      Swal.fire({
        icon: 'success',
        title: 'Exportado!',
        text: 'Arquivo JSON gerado com sucesso.',
        timer: 1500,
        showConfirmButton: false
      });
    });

    document.getElementById("apagarHistorico").addEventListener("click", () => {
      Swal.fire({
        title: 'Apagar todo o hist√≥rico?',
        text: "Essa a√ß√£o n√£o pode ser desfeita.",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#dc2626',
        cancelButtonColor: '#9ca3af',
        confirmButtonText: 'Sim, apagar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          localStorage.removeItem(KEY_HIST);
          carregarHistorico();
          Swal.fire('Apagado!', 'O hist√≥rico foi limpo.', 'success');
        }
      });
    });

    // Inicializa√ß√£o
    window.addEventListener("DOMContentLoaded", () => {
      carregarDados();
      carregarHistorico();
    });
  </script>
</body>

</html>

<!-- e meu viu seus copiadores de mer***. Carlos F.R. (ACE itinha-ma) -->